<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-shopping-cart"></i> E-Store</h1>
                <nav class="nav">
                    <a href="#" class="nav-link" onclick="showSection('products')">Products</a>
                    <a href="#" class="nav-link" onclick="showSection('orders')">My Orders</a>
                    <div class="nav-controls">
                        <input id="searchInput" class="search-input" type="search" placeholder="Search products..." oninput="onSearchChange(this.value)">
                        <button id="cartBtn" class="btn btn-secondary" onclick="toggleCart()"><i class="fas fa-shopping-cart"></i> <span id="cartCount">0</span></button>
                        <button id="authBtn" class="btn btn-primary" onclick="handleAuthClick(event)">Login</button>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Success Message Card -->
        <div id="successModal" class="modal hidden">
            <div class="modal-content" style="background: white; text-align: center; max-width: 350px;">
                <div style="padding: 40px 30px;">
                    <div style="font-size: 60px; margin-bottom: 20px;">✅</div>
                    <h2 style="color: #333; margin-bottom: 10px;">Welcome Back!</h2>
                    <p id="successMessage" style="color: #666; font-size: 16px; margin: 20px 0;">You are now logged in</p>
                    <button class="btn btn-primary" onclick="document.getElementById('successModal').classList.add('hidden')" style="margin-top: 20px;">Continue</button>
                </div>
            </div>
        </div>

        <!-- Auth Modal -->
        <div id="authModal" class="modal hidden">
            <div class="modal-content auth-modal">
                <span class="close" onclick="toggleAuth()"><i class="fas fa-times"></i></span>

                <div class="auth-header">
                    <div class="auth-icon"><i class="fas fa-lock"></i></div>
                    <h2 id="authTitle">Welcome Back</h2>
                    <p class="auth-subtitle" id="authSubtitle">Sign in to your account</p>
                </div>

                <form id="authForm" onsubmit="handleAuth(event)" class="auth-form">
                    <div id="nameGroup" class="form-group hidden">
                        <label>Full Name</label>
                        <input type="text" id="name" placeholder="John Doe" required>
                    </div>

                    <div class="form-group">
                        <label>Email Address</label>
                        <div class="input-icon">
                            <span class="icon"><i class="fas fa-envelope"></i></span>
                            <input type="email" id="email" placeholder="you@example.com" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Password</label>
                        <div class="input-icon">
                            <span class="icon"><i class="fas fa-key"></i></span>
                            <input type="password" id="password" placeholder="••••••••" required>
                        </div>
                    </div>

                    <button type="button" id="authSubmitBtn" class="btn btn-primary full-width auth-btn" onclick="handleAuth({preventDefault: function(){}, target: document.getElementById('authForm')})">
                        <span id="submitText">Sign In</span>
                    </button>

                    <div class="demo-accounts" id="demoAccounts">
                        <p class="demo-label">Demo Accounts:</p>
                        <div class="demo-creds">
                            <button type="button" class="demo-btn" onclick="fillDemo('user@example.com', 'user123')">
                                <i class="fas fa-user"></i> User Account
                            </button>
                            <button type="button" class="demo-btn" onclick="fillDemo('admin@example.com', 'admin123')">
                                <i class="fas fa-user-shield"></i> Admin Account
                            </button>
                        </div>
                        <div class="auth-divider">or</div>

                        <p class="toggle-text" onclick="toggleAuthMode()">
                            <span id="toggleText">Don't have an account? Create one</span>
                        </p>
                    </div>
                </form>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main">
            <!-- Products Section -->
            <section id="products" class="section active">
                <h2><i class="fas fa-tag"></i> Featured Products</h2>
                <div class="filters-row">
                    <div class="categories" id="categoriesList">
                        <!-- categories rendered here -->
                    </div>
                    <div class="product-filters">
                        <select id="sortSelect" onchange="onSortChange(this.value)">
                            <option value="default">Sort: Default</option>
                            <option value="price_asc">Price: Low → High</option>
                            <option value="price_desc">Price: High → Low</option>
                        </select>
                    </div>
                </div>
                <div class="admin-controls hidden" id="adminControls">
                    <button class="btn btn-success" onclick="showAddProductForm()"><i class="fas fa-plus"></i> Add Product</button>
                </div>

                <!-- Add Product Form -->
                <div id="addProductForm" class="form-container hidden">
                    <h3><i class="fas fa-box"></i> Add New Product</h3>
                    <form onsubmit="handleAddProduct(event)">
                        <input type="text" id="productName" placeholder="Product Name" required>
                        <input type="number" id="productPrice" placeholder="Price" step="0.01" required>
                        <input type="text" id="productDesc" placeholder="Description" required>
                        <input type="number" id="productStock" placeholder="Stock" required>
                        <button type="submit" class="btn btn-success"><i class="fas fa-check"></i> Create Product</button>
                        <button type="button" class="btn btn-secondary" onclick="closeAddProductForm()"><i class="fas fa-times"></i> Cancel</button>
                    </form>
                </div>

                <div id="productsList" class="products-grid">
                    <!-- Products loaded here -->
                </div>
                <!-- Cart panel -->
                <div id="cartPanel" class="cart-panel hidden">
                    <h3><i class="fas fa-shopping-cart"></i> Cart</h3>
                    <div id="cartItems"></div>
                    <div class="cart-footer">
                        <strong>Total: $<span id="cartTotal">0.00</span></strong>
                        <button class="btn btn-success" onclick="checkout()">Checkout</button>
                        <button class="btn btn-secondary" onclick="toggleCart()">Close</button>
                    </div>
                </div>
            </section>

            <!-- Orders Section -->
            <section id="orders" class="section hidden">
                <h2><i class="fas fa-receipt"></i> My Orders</h2>
                <div id="ordersList" class="orders-list">
                    <!-- Orders loaded here -->
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2026 E-Commerce Store. All rights reserved.</p>
        </footer>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/products.js"></script>
    <script src="js/orders.js"></script>
</body>

</html>